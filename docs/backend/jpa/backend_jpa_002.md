---
layout: default
title: JPA를 써야할까?
nav_order: 2
description: "JPA를 써야할까?"
parent: jpa
grand_parent: 백엔드
permalink: /backend/jpa/002
---
# JPA를 써야할까?

이전 스프링 개발에서는 많은 프로젝트에서 Mybatis 즉 jdbc를 통하 데이터 영속성을 구현하였다.  
그래서 많은 개발자들이 SQL을 통한 데이터처리에 익숙해져 있는 상황에서 굳이굳이 JPA를 사용해야 하는 이유는 무엇 일까?  
이에 대한 생각은 JPA를 통해 얻는 이점을 생각해보고 결론을 내려보는것이 좋을것 같아서 이점을 정리해보았다.

---


#### 1. SQL 노동 작업이 크게 줄어든다.  

지금까지 JDBC로 개발했던 경험을 생각해 보자. 기초 설계했던것 처럼 끝까지 이어질까?  
그렇게 진행했다면, 망한 프로젝트다. 처음 기획 설계와는 전혀 다른 요구사항은 생겨 날수 밖에 없다.  
그렇다면 그때 마다 우리가 했던 일들을 생각해보자. 예를 들어 고객정보에 성별을 추가해야하는 상황인것이다.  
그렇다면 우리가 이때 해야 할일을 나열해보자.  

고객 정보 테이블 컬럼추가  
```sql
// 고객 정보 테이블 컬럼추가
ALTER TABLE USERS ADD COLUMN SEX ENUM('M','F') NOT NULL;
```

고객 정보 클래스 성별 추가
```java
class users {
    ....
    private ENUMS.SEX sex
    ....
}
```

고객 정보 입력 컬럼 추가
```xml
<insert id="insertUser" parameterType="users">
....
    SEX
....
....
    #{sex}
....
</insert>
```

고객 정보 조회 컬럼 추가
```xml
<select id="selectUser" resultType="users">

SELECT
....
    SEX
....
FROM USERS
<where> 
....
    SEX = #{sex}
....
</where>

</select>
```
고객 정보 수정시 컬럼추가  
```xml
<update id="updateUser" parameterType="users">
....
    SEX = #{sex}
....
</update>
```
  
이렇든 컬럼하나 추가시에도 많은 양의 수정 포인트가 생긴다  
그렇다면 JPA 는 어떨까?  

고객 정보 클래스 성별 추가
```java
class users {
    ....
    private ENUMS.SEX sex
    ....
}
```
  
이렇듯 엔티티에 추가하면 모든 수정 사항인 끝난다. 좀더 빠르게 수정할수있고 포인트가 한곳이라 수정으로 인한 버그처리에 대한 모니터링에도 좋은 이점을 가질수 있게된다.

#### 2. 객체 비교에 상이점

데이터베이스는 결국에 RDBMS 즉, 관계중심적이다. 이로인해 같다라는 의미는 컬럼이 같다라는 의미가 된다. 이는 객체적으로 보았을떄 크게 다른다. 이는 동명이인은 같은 사람이라고 인식하는것이라고 할수있다. 물동 지금시점에 강남역 5번 출구에 초록색 옷을 입은 12살 홍길동은 한명일 가능성이 높지만 이는 많은 조건이 붙을수 밖에 없다. 이를 JPA에서는 하나의 엔티티로 인식해 처리해준다. 불필요 소스를 버릴수있는 장점중 하나다이다.

3. 객체간 관계성 정의

현재 진행중인 프로젝트에 고객의 정보에 반드시 지갑정보를 넣어야 한다고 가정해보자.. 그렇다면 어떤일 이일어 날까...  
1번에서 자세히다룬 처리를 반복해야한다. 

1. 지갑 테이블을 생성한다.
2. 고객정보 객체에 지갑 객체정보 추가
3. 고객정보 입력시 지갑정보도 입력할수 있도록 SQL INSERT 문 작성 및 트랜잭션처리
4. 고객정보 조회시 지갑정보를 가져올수 있도록 JOIN 처리
5. 고객정보 삭제 처리시 이에 따른 지갑정보 처리

이는 관계성 한번일경우 이렇게 쓸수있고 정리할수 있도록 처리가 가능하다. 하지만 만약에 이 관계가 양파처럼 이어진다면 어떻게 될까? 지갑에 카드, 돈 정보를 이어가고 카드에 은행정보를 이어가고 은행의 계좌 정보를 이어가고 계좌의 입출금 내역까지 이어간다고 했을경우 우리는 복잡한 SQL을 작성한후 Mybatis 라면 Collection 처리를 위해 resultMap도 바꿔줘야 한다. 또는 이렇게 복잡할경우 SQL나눠서 잡업해 합치는 방법으로 처리할때도 있다. 객체지향적으로는 불필요한 코드가 많아진다. 이를 JPA 로 구현한다면 Lazy Loading 을통해 각각의 객체가 관계의 따라 필요할 경우 가져오는 방식을 통해 간단하고 쉽게 구현이 가능하다.

#### 4. 페러다임 불일치

자바 개발자라면 가장 처음에 습득하는것 상속이다. 사람은 동물을 상속 받은것이고 핸드폰은 물건은 상속받은것이다. 이는 자바를 쓰는 가장 큰이유중 하나이다. 그렇다면 상속 개념은 JDBC를 통해 구현이 가능할까 이는 우리가 직접 코딩을해서 구현하는 수밖에 없다. RDBMS에서 상속이라는 관계는 없다. 테이블은 수평적으로 이루어져 있다. 이를 수직적으로 바꿀수는 없다. 이러한 코딩을 JPA에서는 이미 구현되어 있어 우리는 사용하면 그뿐이다.

---

이렇게 크게 4가지만 예로 들었지만 더많은 이유가 있을수도 있다. 하지만 이는 꼭 JPA가 JDBC보다 좋다라는것은 아니다. 이는 상황에 따라 다르다. 하지만 자바로 개발한다면, 그이유는 객체지양적 코드와 개발을 위해 자바를 선택한것이다. 하지만 JDBC를 통한 개발을 진행 하다보면 결국에는 SQL 위주의 개발이 이루어질수밖에 없다. 이러한 상화을 인식하고 선택하는것이 맞는것 같다.
