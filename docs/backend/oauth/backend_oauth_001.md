---
layout: default
title: Oauth 인증이란?
nav_order: 1
description: "Oauth"
parent: Oauth
grand_parent: 백엔드
permalink: /backend/oauth/001
---
# Oauth 탄생!?
Oauth 내가 처음으로 프로젝트에 실제로 투입되었을때 가장 먼저 접한 기술이다.
만약에 하나의 프로젝트에 여러가지 서버를 늘리고 해당 서버마다 접근제한 처리를 한다고 한다.
그럴경우 모든 서버마다 로그인 처리를 해야하는 번거러움이 있다. 이럴때 하나의 서버에서만 로그인 처리를 하는방식을 구현하고 싶지 않을까?
그래서 생겨난것이 Oauth처리 방식이다. 해당 유저를 대신하여 인증서버에서 인증을 받은후 해당 인증을 통해 권한을 얻어 리소스 서버에 접근하는 방식 이라고 할수있다.
말이 어렵지만 아래 그림을 통해 하나하나 살펴가 보자.
<br>
![](/assets/images/Oauth_flow.jpg)

1. 어느 유저가 우리 서비스 프로그램에 로그인 요청을 한다 
2. 우리서비스에서는 로그인 페이지에 구글에서 지원해주는 구글로그인 페이지로 이동가능한 버튼을 심어서 보내준다
3. 유저는 구글로 로그인을 한다. 이때 해당 페이지는 구글에서 제공하는 팝업창이 뜨는것이다.
4. 로그인 요청을 받은 서버에서는 우리서버에 로그인 완료처리에 관한 코드를 응답해준다 ( 이때 인증완료)
5. 코드를 받은 우리 서버에서는 코드를 통해 토큰을 요청한다.
6. 토큰 요청을 받은 서버에서는 해당 코드를 검증후 토큰을 응답한다.
7. 우리서버에서는 해당 토큰으로 리소스서버에게 정보를 요청한다.
8. 리소스서버에서는 해당 토큰 검증후 정보르 응답한다.

이러한 순서로 Oauth는 이루어진다. 
> 용어정리
>> 리소스 오너 : 로그인 사용자 <br>
>> 클라이언트 : 우리 서비스 서버 <br>
>> 인증서버 : 구글 로그인 요청 서버 <br>
>> 리소스 서버 : 사용자 정보를 실제로 가지고 있는 서버 <br>

---
# Oauth 2.0 인증방식들

1. Authorization Code Grant Type : 권한 부여 코드 승인 타입
 ![](/assets/images/oauth_1.PNG)
- Hand shake - 권한서버에게 권한 부여 코드 요청 
- 크라이언트가 직접 권한서버에 로그인 처리 ( 클라이언트의 고유 아이디 패스워드값으로 요청 )
- 클라이언트에게 코드 응답 (인증 절차 완료)
- 응답 받은 코드로 Access Token 요청
- Access Token 응답 (권한 절차 완료)
- 해당 리소스에 접근하여 리소스 응답 ( 토큰 유효시간이 지나기 전까지 사용가능)

2. Implicit Grant : 암시적 승인
![](/assets/images/oauth_2.PNG)
- Hand shake - 권한서버에게 권한 부여 코드 요청 
- 크라이언트가 직접 권한서버에 로그인 처리 ( 클라이언트의 고유 아이디 패스워드값으로 요청 )
- 클라이언트에게 Access Token 응답 
- 응답 받은 Access Token 검증 요청
- Access Token 검증 응답 (인증, 권한 절차 완료)
- 해당 리소스에 접근하여 리소스 응답 ( 토큰 유효시간이 지나기 전까지 사용가능)

3. Resource Owner Password Credentials Grant Type : 리소스 소유자 암호 자격 증명 타입
![](/assets/images/oauth_3.PNG)
- 인증데이터를 리소스 주인에게 받음
- 리소스 주인에게 받은 데이터를 통해 권한 서버에 직접 토큰 요청
- 토큰 응답 (인증, 권한 절차 완료)
- 해당 리소스에 접근하여 리소스 응답 ( 토큰 유효시간이 지나기 전까지 사용가능)

4. Client Credentials Grant Type : 클라이언트 자격 증명 타입
![](/assets/images/oauth_4.PNG)
- 리소스 주인이 권한서버에게 토큰 요청
- 토큰응답
- 해당 리소스에 접근하여 리소스 응답 ( 토큰 유효시간이 지나기 전까지 사용가능)